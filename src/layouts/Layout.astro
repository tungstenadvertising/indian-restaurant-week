---
import '../style.css';
import restaurantsJson from '../../public/data/restaurants.json';

interface Props {
  title?: string;
}

const { title = "Indian Restaurant Week - Celebrate Diwali" } = Astro.props;

// Extract restaurants array for injection
const restaurants = restaurantsJson.restaurants;
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>

    <link rel="preconnect" href="https://api.mapbox.com">
    <link rel="dns-prefetch" href="https://api.mapbox.com">

    <!-- Preload critical font -->
    <link rel="preload" href="/fonts/ysabeau-latin.woff2" as="font" type="font/woff2" crossorigin>

    <!-- Inline critical font-face for fastest rendering -->
    <style>
      @font-face {
        font-family: 'Ysabeau';
        font-style: normal;
        font-weight: 100 900;
        font-display: swap;
        src: url('/fonts/ysabeau-latin.woff2') format('woff2');
      }
      @font-face {
        font-family: 'Ysabeau';
        font-style: italic;
        font-weight: 100 900;
        font-display: swap;
        src: url('/fonts/ysabeau-latin-italic.woff2') format('woff2');
      }
    </style>

    <!-- Preload other critical assets -->
    <link rel="preload" href="/images/global/irw-logo.svg" as="image" type="image/svg+xml">
    <!-- hero-texture uses LQIP blur-up, no preload needed -->

    <!-- Inject restaurant data at build time for instant access -->
    <script is:inline define:vars={{ restaurants }}>
        window.__RESTAURANTS__ = restaurants;
    </script>
</head>
<body class="text-gray-800 text-lg leading-relaxed overflow-x-hidden scroll-smooth">
    <slot />
    <script>
        import '../script.js';
    </script>
</body>
</html>

